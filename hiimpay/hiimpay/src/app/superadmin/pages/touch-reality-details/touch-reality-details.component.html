<section class="mt-3 main-container">
    <div class="container my-2">
      <div class="row bg-light py-2 px-0">
        <div class="col-lg col-md col-sm-12">
          <div class="d-flex align-items-center">
            <div>
              <button class="btn btn-light rounded-circle me-1" (click)="goBack()">
                <i class="fas fa-arrow-left"></i>
              </button>
            </div>
            <h3 style="margin: 0;color: #103a7f;font-weight: bolder;">
              {{stageName}}
            </h3>
          </div>
        </div>
      </div>
      <div class="row mt-3">
        <div class="nav nav-tabs w-100" id="nav-tab" role="tablist">
          <a
            class="nav-item nav-link"
            *ngFor="let tab of tabs"
            [class.activestage]="selectedTab === tab"
            role="tab"
            style="flex: 1; text-align: center;"
            (click)="selectTab(tab)"
          >
            {{ tab }}
          </a>
        </div>
      </div>
      <div class="mt-4">
        <div class="d-flex border-0 subphase-tab-container" style="gap: 1em;">
          <button
            class="w-100 p-2 border-0 button"
            *ngFor="let sub of subphases"
            (click)="selectSubphase(sub)"
            [ngClass]="{'activeSubphase': selectedSubphase?.subphaseId === sub?.subphaseId}"
          >
            {{ sub?.subphaseName }}
          </button>
        </div>
      </div>
      <div class="text-right">
        <button
          class="rounded border-0 text-white px-2 py-2 mt-3"
          style="background-color: #103a7f;"
          (click)="openAddmoreRealityTouchPoint()"
        >
        {{ selectedTab === 'Touchpoint' ? 'Add touchpoint' : 'Add reality component' }}
        </button>
      </div>
      <div class="row mt-3">
        <table class="table align-middle mb-0 bg-white table-responsive-lg" *ngIf="selectedTab === 'Touchpoint' && selectedSubphase?.touchPoints?.length > 0">
          <thead class="bg-light">
            <tr>
              <th>Touchpoints</th>
              <th>Weightage</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let touchpoint of selectedSubphase.touchPoints">
              <td>
                <div class="ms-2">{{ touchpoint.touchpoints }}</div>
              </td>
              <td>
                <div class="ms-4">
                  <p>{{ touchpoint?.weightage | number }}</p>
                </div>
              </td>
              <td>
                  <button class="rounded border-0 text-white px-2 py-1" style="background-color: #103a7f;" (click)="onRemoveTouchpoint(touchpoint)">Remove</button>
              </td>
            </tr>
          </tbody>
        </table>
        <table class="table align-middle mb-0 bg-white table-responsive-lg" *ngIf="selectedTab === 'Reality component' && selectedSubphase?.realityComponent?.length > 0">
          <thead class="bg-light">
            <tr>
              <th>Components</th>
              <th>Weightage</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let component of selectedSubphase.realityComponent">
              <td>
                <div class="ms-2">{{ component.componentName }}</div>
              </td>
              <td>
                <div class="ms-4">
                  <p>{{ component?.weightage | number }}</p>
                </div>
              </td>
              <td>
                  <button class="rounded border-0 text-white px-2 py-1" style="background-color: #103a7f;" (click)="onRemoveComponent(component)">Remove</button>
              </td>
            </tr>
          </tbody>
        </table>
        <div *ngIf="(selectedTab === 'Touchpoint' && selectedSubphase?.touchPoints?.length <= 0) || (selectedTab === 'Reality component' && selectedSubphase?.realityComponent?.length <= 0)" class="text-center">
          No {{ selectedTab.toLowerCase() }} found  
        </div>
      </div>
    </div>
  </section>
  