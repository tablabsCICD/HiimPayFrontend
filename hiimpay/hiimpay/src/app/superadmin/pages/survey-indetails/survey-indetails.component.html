<section class="mt-3 main-container">
 <div class="container my-2">
  <div class="row  bg-light py-2 px-0">
    <div class="col-lg col-md col-sm-12">
      <div class="d-flex align-items-center">
        <div>
          <button class="btn btn-light rounded-circle me-1" (click)="goBack()">
            <i class="fas fa-arrow-left"></i>
          </button>  
        </div>
        <h3 style="margin: 0;color: #103a7f;font-weight: bolder;">{{detailInfo?.surveyName}}</h3>
      </div>
    </div>
  </div>
  <!-- <div class="row row-cols-1 row-cols-sm-5  justify-content-center info-card">
    <div class="col" *ngFor="let stageDetail of detailInfo?.dto" (click)="stage(stageDetail)">
      <div class="card" [ngClass]="{'activePhase':stageDetail.clicked}">
        <div class="card-body">
          <div class="row">
            <div class="col  align-self-center">{{stageDetail.stageName}}
              <h5 class="card-title  fs-6 text-uppercase fw-bold mb-2"></h5>
              <h5 class="card-title fs-6 fw-bold">20</h5>
            </div>
            <div class="col-auto">
              <circle-progress [percent]="20" [radius]="35" [outerStrokeWidth]="10" [innerStrokeWidth]="10"
                [outerStrokeColor]="'#103a7f'" [innerStrokeColor]="'#069DE0'" [animation]="true" [showSubtitle]="false"
                [clockwise]="true" [showUnits]="true" [animationDuration]="300"></circle-progress>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div> -->
  <div class="row mt-3">
    <div class="nav nav-tabs w-100" id="nav-tab" role="tablist">
      <a
        class="nav-item nav-link"
        *ngFor="let stageDetail of detailInfo?.dto"
        [class.activestage]="stageDetail?.clicked"
        (click)="stage(stageDetail)"
        role="tab"
        [hidden]="stageDetail?.stageName?.toLowerCase() === 'default' || detailInfo.surveyName==='Feel, Use, Do and See survey '"
        style="flex: 1; text-align: center;"
      >
        {{ stageDetail?.stageName }}
      </a>
    </div>
  </div>
  
  <div class="mt-4">
    <div class=" d-flex border-0 " style="gap: 2em">
      <button class="w-100 p-2 border-0 button" *ngFor="let sub of subphase" (click)="substage(sub,stages?.stageName)" [ngClass]="{'activeSubphase':sub?.clicked}" [hidden]="sub?.subPhaseName?.toLowerCase()==='default'">
        {{sub?.subPhaseName}}
      </button>
    </div>
  </div>
  <div class="text-right" *ngIf="isStatic=='false'">
      <button class="rounded border-0 text-white px-2 py-2 mt-3" style="background-color: #103a7f;" (click)="openAddmoreQuestion()">Add question</button>
  </div>
  <div class="row mt-3">
    <table class="table align-middle mb-0 bg-white table-responsive-lg" *ngIf="substageQuestions?.questionsAnswerResponseDtos?.length>0">
      <thead class="bg-light">
        <tr>
          <th>Questions</th>
          <th>Max weightage</th>
          <th  *ngIf="isStatic=='false'"><div class="col ms-2">Action</div></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of substageQuestions.questionsAnswerResponseDtos">
          <td>
            <div class="ms-2"><strong>Question:</strong> {{ data.question }}</div>
            <div class="ms-2 options-container mt-1">
              <strong  *ngIf="data.questionType === 'mcq' || data.questionType === 'both' || data.questionType ==='reasonForEXIT'">Options:</strong>
              <ul class="option-list ms-2" *ngIf="data.questionType === 'mcq' || data.questionType === 'both'">
                <li *ngFor="let option of data?.options">{{ option }}</li>
              </ul>
              <ul class="option-list ms-2" *ngIf="data.questionType === 'reasonForEXIT'">
                <li *ngFor="let option of exitSurveyList">{{ option }}</li>
              </ul>
            </div>
            <p *ngIf="data.questionType === 'descriptive'" class="ms-4"> {{ data?.answer || 'This is a descriptive question.' }} </p>
            <p *ngIf="data.questionType === 'both'" class="ms-4 mt-2"> {{ data?.answer || 'This is also a descriptive question.' }}</p>
            <p *ngIf="data.questionType === 'eNPS'" class="ms-4">This is an ENPS question.</p>
          </td>
          <td >
            <div class="ms-4">
              <p>{{data?.maxWeightage | number}}</p>
            </div>
          </td>
          <td  *ngIf="isStatic=='false'">
            <div class="col">
              <button class="rounded border-0 text-white px-2 py-1" style="background-color: #103a7f;" (click)="onRemoveQuestion(data)">Remove</button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="substageQuestions?.questionsAnswerResponseDtos?.length<=0" class="text-center">
      No questions found  
    </div>
  </div>
</div>
</section>